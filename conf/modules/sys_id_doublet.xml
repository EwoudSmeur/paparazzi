<!DOCTYPE module SYSTEM "module.dtd">

<module name="sys_id_doublet" dir="system_identification">
  <doc>
    <description>
    Doublet maneuver for system itentification.
    </description>
    <define name="DOUBLET_ENABLED"     value="TRUE|FALSE"  description="If false, the doublet does not run and values are not added"/>
  </doc>

  <settings>
    <dl_settings name="System identification">
      <dl_settings name="System doublet">
        <dl_setting min="0" max="1"    step="1" values="Inactive|Active" shortname="Activate doublet" var="doublet_active" type="uint8_t" module="system_identification/sys_id_doublet" handler="activate_handler">
          <strip_button name="Doublet start" value="1" group="System identification"/>
          <strip_button name="Doublet stop"  value="0" group="System identification"/>
        </dl_setting>
        <dl_setting min="0"    max="9600" step="100"  shortname="Amplitude"      var="doublet_amplitude"               type="int32_t" module="system_identification/sys_id_doublet"/>
        <dl_setting min="0"    max="10" step="0.1"  shortname="Time step"      var="doublet_time_step_s"               type="float" module="system_identification/sys_id_doublet"/>
        <dl_setting min="0"    max="10" step="0.1"  shortname="Time offset"      var="doublet_time_offset_s"               type="float" module="system_identification/sys_id_doublet"/>
      </dl_settings>
    </dl_settings>
  </settings>

  <header>
    <file name="sys_id_doublet.h"/>
  </header>

  <init fun="sys_id_doublet_init()"/>
  <periodic fun="sys_id_doublet_periodic()" freq="60" autorun="TRUE"/>

  <makefile>
    <file name="pprz_doublet.c"/>
    <file name="sys_id_doublet.c"/>
  </makefile>
</module>
